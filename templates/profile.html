<!DOCTYPE html>

{% load staticfiles %}
{% load i18n %}

<html>
<head>
	<title>Travel Tracker</title>
	<link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" type="text/css" rel="stylesheet"/>
	<!-- Custom styles for this template -->
	<link rel="stylesheet" type="text/css" href="{% static 'profile.css' %}"/>

	<link href='http://fonts.googleapis.com/css?family=Lato:400,900' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
	html { height: 100% }
	body { height: 100%; margin: 0; padding: 0 }
	#map-canvas { height: 100% }
	</style>
	<script type="text/javascript"
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0H2gmjFao_osUOe6ZXJqZDTUO6iOuwEQ&sensor=true">
	</script>
	<script type="text/javascript">
	function initialize() {
		var styles = [
		{
			featureType: "administrative.country",
			stylers: [
			{ visibility: "on" }
			]
		},{
			featureType: "administrative.province",
			stylers: [
			{ visibility: "on" }
			]
		},{
			featureType: "landscape",
			stylers: [
			{ visibility: "off" }
			]
		},{
			featureType: "poi",
			stylers: [
			{ visibility: "off" }
			]
		},{
			featureType: "road",
			stylers: [
			{ visibility: "off" }
			]
		}
		]
		var mapOptions = {
			zoom: 2,
			center: new google.maps.LatLng(25, 0),
			mapTypeControl: false,
			panControlOptions: {
				position: google.maps.ControlPosition.LEFT_CENTER
			},
			zoomControlOptions: {
				position: google.maps.ControlPosition.LEFT_CENTER
			},
			styles: styles
		};
		var map = new google.maps.Map(document.getElementById("map-canvas"),
			mapOptions);

		// var CountryName = "Israel";

		// var FT_Query = "SELECT 'kml_4326' FROM "+FT_TableID+" WHERE 'name_0' = '"+CountryName+"';";
		// var FT_Options = { suppressInfoWindows: true, query:FT_Query };
		// document.getElementById("FTquery").innerHTML = FT_Query; 
		// layer = new google.maps.FusionTablesLayer(FT_TableID, FT_Options);
		// layer.setMap(map);


		var layer = new google.maps.FusionTablesLayer({
			query: {
				select: 'kml_4326',
				from: '1uKyspg-HkChMIntZ0N376lMpRzduIjr85UYPpQ',
			},
			styles: [{
				polygonOptions: {
					fillColor: "#FFFFFF",
					fillOpacity: 0.0
				}
			}]
		});
		layer.setMap(map);
		google.maps.event.addListener(layer,'click',function(e) {
			var countryName = e.row['sovereignt'].value;
			layer.set("styles", [{
				where: "'sovereignt' == '+countryName+'", 
				polygonOptions : {
					fillColor : '#008C00', 
					fillOpacity : 0.5, 
				}
			} 
			]);
		}
		);
	}
	google.maps.event.addDomListener(window, 'load', initialize);
	</script>
</head>
<body>

	<div class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">

			<a class="navbar-brand" href="{% url 'home' %}">Travel Tracker</a>

			{% if user.is_authenticated %}
			<p class="navbar-text navbar-right">Hello there, <a href="{% url 'profile' %}" class="navbar-link">{{ user.username }}</a>!&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp; <a href="{% url 'auth_logout' %}" class="navbar-link">Log out</a></p>
			{% endif %}

		</div>
	</div>

	<div id="map-canvas"/>
</body>
</html>